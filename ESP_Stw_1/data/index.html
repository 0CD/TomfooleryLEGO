
<!DOCTYPE html>
<html>
<head>
	<title>RoundSlider - A sample demo</title>
	<script src="jquery-1.11.3.min.js"></script>
	<link href="roundslider.min.css" rel="stylesheet" />
	<script src="roundslider.min.js"></script>

</head>

<body style="padding: 10px 0 0 20px; font-family: monospace;">

<div class="types">
	<div class="grid-container">
		<div class="grid-item">
			<h3>Steering wheel</h3>
			<div class="control">
				<div id="rd_slider_1"></div>
			</div>
			<br/>
			<br/>
			<br/>
		<label for="box1">Last action: </label><input id="box1" value="0" />
	</div>

		<div class="grid-item">
			<h3>Drive</h3>
			<button onclick="FRW1()">Forw 1cm</button>
			<button onclick="FRW5()">Forw 5cm</button>
			<br/>
			<br/>
			<button onclick="RET1()">Ret.. 1cm</button>
			<button onclick="RET5()">Ret.. 5cm</button>
			<br/>
			<br/>
			<br/>
			<br/>
			<h3>Custom values</h3>
			<label for="distance">Drive: </label>
			<br/>
			<input id="distance"/>
			<button onclick="drive()">Drive</button>
			<br/>
			<br/>
			<label for="angle">Turn to: </label>
			<br/>
			<input id="angle"/>
			<button onclick="turnTo()">Turn</button>

			<p with id="demo"></p>
		</div>
	</div>
</div>

</div>


<script type="text/javascript">
	///////////////////////////////////// JS start /////////////////////

	var dire=0;		// direction
	var dist=0;		// distance
	var turnto=0;	// turnto
	var mode=0;		// mode 1 = direction value 2=distance value 3=turnto value

	var valx = document.getElementById("rd_slider_1").value;

	document.getElementById("box1").value=0 ;


	$(document).ready(function ()
	{
		$("#rd_slider_1").roundSlider
		(
				{

					radius: 85,
					min: -180,
					max: 180,
					circleShape: "pie",
					sliderType: "min-range",
					value: 0,
					startAngle: 315,

					change: function(args)
					{

						$('#range').html(args.value);

						//document.getElementById("stor").value=args.value;
						// call type function

						//send_srw_val(args.value);
						dire=args.value;			 // direction variable set
						send_srw_val(dire);			 // call type_sl_val

					}


				}

		);

	});


	function turnTo() {
		turnto = document.getElementById("angle").value;
		mode=3;
		if (turnto <= 360 && turnto >= 0) {
			document.getElementById("box1").value = `Turn to ${turnto} deg`;
			httpGetAsync(tryme);
		} else {
			alert("Please enter a value between 0 and 360");
		}
	}

	function drive() {
		dist = document.getElementById("distance").value;
		if (dist >= 0) {
			document.getElementById("box1").value = `Forw ${dist} cm`;
		} else if (dist < 0) {
			document.getElementById("box1").value = `Ret ${-dist} cm`;
		}
		mode=2;
		httpGetAsync(tryme);
	}

	function send_srw_val(val)		   				 // send stw value
	{
		// console.log(e.type);
		// valx=10;
		document.getElementById("box1").value=`Turn ${val} deg`;
		mode=1;
		httpGetAsync(tryme);
	}


	function FRW5()
	{
		document.getElementById("box1").value = "Forw 1 cm";
		mode=2;
		dist=5;
		httpGetAsync(tryme);
	}

	function RET5()
	{
		document.getElementById("box1").value = "Ret 5 cm";
		mode=2;
		dist=-5;
		httpGetAsync(tryme);
	}

	function FRW1()
	{
		document.getElementById("box1").value = "Forw 1 cm";
		mode=2;
		dist=1;
		httpGetAsync(tryme);
	}

	function RET1()
	{
		document.getElementById("box1").value = "Ret 5 cm";
		mode=2;
		dist=-1;
		httpGetAsync(tryme);
	}




	function httpGetAsync(callback)
	{
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.onreadystatechange = function()
		{
			if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
				callback(xmlHttp.responseText);
		}
		if (mode==1) { 	xmlHttp.open("GET",'/?dire='+dire, true); };// true for asynchronous
		if (mode==2) {  xmlHttp.open("GET",'/?dist='+dist, true); };// true for asynchronous
		if (mode==3) {  xmlHttp.open("GET",'/?turnto='+turnto, true); };// true for asynchronous
		xmlHttp.send(null);
	}



	function tryme(param1)
	{

		//		 document.getElementById("box2").value=param1;
		document.getElementById("demo").value=param1;

	}

	///////////////////////////////////////////// JS END

</script>

<style>
	h1 span {
		font-size: 0.6em;
	}
	input {
		width: 95px;
	}
	.types {
		display: inline-block;
		padding: 10px;
		border: 1px dotted;
		margin-right: 20px;
		overflow: hidden;
	}

	.grid-container {
		display: grid;
		grid-template-columns: auto auto auto;
		gap: 10px;
	}

	.grid-item {
		padding: 10px;
		text-align: left;
		height: auto;
		width: 200px;
	}
	.control {
		margin-right: 70px;
	}
</style>
</body>
</html>
